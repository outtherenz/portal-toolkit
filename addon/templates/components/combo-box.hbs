{{input
  class=(or class 'text-input')
  type='text'
  value=searchTerm
  placeholder=(if finderVisible (or searchPlaceholder 'Type to searchâ€¦') placeholder)
  keyDown=(action 'keyDown' bubbles=false)
  click=(action 'setFinderVisible' true bubbles=false)
  autocomplete="off"
}}

{{#if finderVisible}}
  {{#unless isLoading}}
    {{#if filteredOptions.length}}
      <div class="combo-box__drop-down">
        {{#each filteredOptions as |option index|}}
          {{combo-box/item
            index=index
            selectedRow=selectedRow
            setHighlight=(action 'setHighlight' bubbles=false)
            unSetHighlight=(action 'unSetHighlight' bubbles=false)
            setItem=(action 'setItem' bubbles=false)
            option=option
            key=key
          }}
        {{/each}}
      </div>
    {{else if (or emptyText emptyButtonAction)}}
      <div class="combo-box__drop-down">
        <div class="combo-box__drop-down__row combo-box__drop-down__row--empty">
          {{#if emptyText}}
            <span class="text-button--spaced">
              {{emptyText}}
            </span>
          {{/if}}
          {{#if emptyButtonAction}}
            <button class="text-button text-button--spaced" {{action emptyButtonAction bubbles=false}}>
              {{or emptyButtonText 'Click to update'}}
            </button>
          {{/if}}
        </div>
      </div>
    {{/if}}
  {{else}}
    <div class="combo-box__drop-down">
      <div class="combo-box__drop-down__row combo-box__drop-down__row--loading">
        {{loading-icon 'spinner'}}
      </div>
    </div>
  {{/unless}}
{{/if}}
